# 🤖 ربات تلگرام مدیریت زینوا

## 📋 **معرفی**

ربات تلگرام زینوا یک سیستم مدیریتی کامل برای وبسایت زینوا است که امکان مدیریت محتوا، نظارت بر بازدیدها و مدیریت درخواست‌ها را فراهم می‌کند.

## 🔧 **تنظیمات اولیه**

### توکن ربات
```
8329442223:AAEnpJuaX4v2jntzQ_9q5Gt6S1Et6B5mxjY
```

### کانال ادمین
```
@xenova_admin
```

### ادمین‌های فعلی
- `6030020493` (ادمین اصلی)

## 📱 **دستورات ربات**

### 🚀 **دستورات اصلی**

| دستور | توضیح |
|-------|-------|
| `/start` | شروع ربات و نمایش منوی اصلی |
| `/help` | راهنمای کامل دستورات |
| `/stats` | آمار بازدید روزانه |
| `/requests` | درخواست‌های جدید |
| `/backup` | پشتیبان‌گیری از دیتابیس |

### 📝 **مدیریت درخواست‌ها**

| دستور | توضیح |
|-------|-------|
| `/edit_request [ID]` | ویرایش وضعیت درخواست |
| `/requests` | مشاهده درخواست‌های جدید |

**وضعیت‌های درخواست:**
- `new` - جدید
- `reviewing` - در حال بررسی
- `responded` - پاسخ داده شده
- `completed` - تکمیل شده
- `cancelled` - لغو شده

### 📰 **مدیریت محتوا**

| دستور | توضیح |
|-------|-------|
| `/add_news` | اضافه کردن خبر جدید |
| `/add_team` | اضافه کردن عضو تیم |

## 🔔 **اطلاع‌رسانی‌های خودکار**

### 📝 **فرم‌های جدید**
ربات به صورت خودکار اطلاع‌رسانی می‌کند:
- فرم تماس جدید
- درخواست سرمایه‌گذاری جدید
- اطلاعات کامل کاربر

### 👁️ **بازدیدهای مهم**
- بازدید صفحه تماس
- بازدید صفحه سرمایه‌گذاری
- اطلاعات دستگاه و IP

### 🔄 **تغییرات وضعیت**
- تغییر وضعیت درخواست‌ها
- اضافه شدن محتوای جدید
- پشتیبان‌گیری

## 🛠️ **نحوه استفاده**

### 1. **شروع کار**
```
/start
```

### 2. **مشاهده آمار**
```
/stats
```

### 3. **مدیریت درخواست‌ها**
```
/requests
/edit_request 123
```

### 4. **اضافه کردن خبر**
```
/add_news
```
سپس مراحل زیر را دنبال کنید:
1. عنوان خبر
2. محتوای خبر
3. خلاصه خبر
4. نام نویسنده
5. آدرس تصویر (اختیاری)

### 5. **اضافه کردن عضو تیم**
```
/add_team
```
سپس مراحل زیر را دنبال کنید:
1. نام عضو
2. نقش
3. مهارت‌ها (با کاما جدا)
4. تجربیات
5. آدرس عکس (اختیاری)

## 🔒 **امنیت**

### ✅ **ویژگی‌های امنیتی**
- فقط ادمین‌های مجاز دسترسی دارند
- تمام عملیات لاگ می‌شوند
- پشتیبان‌گیری خودکار
- محافظت از فایل xenova.json

### 👥 **اضافه کردن ادمین جدید**
در فایل `src/bot/telegram-bot.js`:
```javascript
const ADMIN_IDS = [6030020493, NEW_ADMIN_ID];
```

## 📊 **دیتابیس**

### جداول مورد استفاده:
- `contact_submissions` - فرم‌های تماس
- `investment_requests` - درخواست‌های سرمایه‌گذاری
- `page_visits` - بازدیدهای صفحات

### فایل‌های مهم:
- `doc/xenova.json` - محتوای اصلی سایت
- `backups/` - پشتیبان‌های خودکار

## 🚨 **عیب‌یابی**

### مشکلات رایج:

1. **ربات پاسخ نمی‌دهد:**
   ```bash
   pm2 logs xenova-app | grep "ربات"
   ```

2. **خطای توکن:**
   - بررسی صحت توکن در فایل ربات
   - اطمینان از فعال بودن ربات

3. **خطای دسترسی به کانال:**
   - اطمینان از عضویت ربات در کانال
   - بررسی مجوزهای ربات

4. **خطای دیتابیس:**
   ```bash
   # بررسی مجوزهای فایل
   chmod 666 xenova.db
   ```

## 📈 **آمار و گزارش‌گیری**

### گزارش‌های موجود:
- بازدید روزانه
- درخواست‌های جدید
- تغییرات وضعیت
- محتوای اضافه شده

### لاگ‌ها:
```bash
# مشاهده لاگ‌های ربات
pm2 logs xenova-app

# فیلتر لاگ‌های ربات
pm2 logs xenova-app | grep "ربات"
```

## 🔄 **پشتیبان‌گیری**

### پشتیبان‌گیری خودکار:
- روزانه در ساعت 2 صبح
- ذخیره در پوشه `backups/`
- حذف خودکار فایل‌های قدیمی

### پشتیبان‌گیری دستی:
```
/backup
```

## 📞 **پشتیبانی**

برای مشکلات فنی یا سوالات:
1. بررسی لاگ‌های سیستم
2. تست دستور `/help`
3. بررسی وضعیت PM2
4. بررسی اتصال اینترنت سرور

---

**نکته:** این ربات به صورت خودکار با سرور راه‌اندازی می‌شود و نیازی به راه‌اندازی جداگانه ندارد. 